# KATA - The Way of the Keyboard (Go Edition) ü•ã

> **"Slow is smooth. Smooth is fast."**

## 1. Identidad y Filosof√≠a

En las artes marciales japonesas, una **Kata (Âûã)** es una secuencia de movimientos coreografiados que se practica en solitario. El objetivo no es "ganar", sino **interiorizar la forma** hasta que el movimiento se vuelva instintivo.

**Kata** transforma la escritura de c√≥digo en un acto reflejo, liberando la mente para resolver problemas, no para buscar teclas.

---

## 2. Investigaci√≥n Cient√≠fica y Metodolog√≠as

Basado en la investigaci√≥n de metodolog√≠as de mecanograf√≠a y neurociencia cognitiva:

### A. Algoritmos de Repetici√≥n Espaciada (SRS)

- **Hallazgo:** El aprendizaje no es lineal. Olvidamos seg√∫n una "curva del olvido".
- **Aplicaci√≥n en Kata:** Implementaremos un sistema simplificado inspirado en **SuperMemo-2 (SM-2)**.
  - Cada tecla y bigrama tendr√° un "nivel de fuerza".
  - Si fallas `p` seguido de `{`, ese bigrama se a√±ade a una "cola de prioridad" para aparecer con m√°s frecuencia en las siguientes sesiones.
  - Lo que dominas, se muestra menos; lo que fallas, se repite hasta la maestr√≠a.

### B. N-Grams y Ley de Zipf (Chunks Cognitivos)

- **Hallazgo:** Los expertos no escriben letras, escriben secuencias (chunks). Practicar caracteres aleatorios es ineficiente.
- **Aplicaci√≥n:**
  - El motor no generar√° `k j a s d`.
  - Generar√° N-Grams sint√°cticos comunes en Go: `func`, `if err != nil`, `return`, `fmt.Println`, `struct`, `[]int`.
  - Uso de diccionarios ponderados por frecuencia de uso real en repositorios de GitHub.

### C. Estado de Flujo y Retroalimentaci√≥n

- **Hallazgo:** La "melioraci√≥n" (conformarse con hacerlo "suficientemente bien") detiene el progreso. Para evitarlo, se necesita feedback inmediato pero no intrusivo.
- **Aplicaci√≥n:**
  - **Feedback Visual Sutil:** El cursor cambia de color sutilmente, no hay parpadeos rojos gigantes que rompan el "flow".
  - **Latencia M√≠nima:** Al ser Go, la respuesta del input debe ser instant√°nea.

---

## 3. Estrategia de Curva de Aprendizaje

Para evitar la frustraci√≥n y maximizar la retenci√≥n:

1.  **Fase "Accuracy First":**
    - El sistema penalizar√° el "mashing" (golpear teclas al azar).
    - Si la precisi√≥n baja del 95%, el sistema bloquear√° el avance o forzar√° un modo m√°s lento. La velocidad es un subproducto de la precisi√≥n.

2.  **Dificultad Adaptativa:**
    - **Nivel 1:** Home Row + Bigramas comunes.
    - **Nivel 2:** Palabras completas.
    - **Nivel 3:** S√≠mbolos de programaci√≥n (`{}`, `[]`, `!=`).
    - **Nivel 4 (The Code):** Snippets reales de c√≥digo Go con indentaci√≥n y estructura.

---

## 4. Especificaci√≥n T√©cnica (Stack Go)

La implementaci√≥n utilizar√° el ecosistema **Charm** para una CLI moderna y hermosa.

### Core Architecture

- **Lenguaje:** Go (Golang) 1.23+
- **UI Framework:** [Bubble Tea](https://github.com/charmbracelet/bubbletea) (Arquitectura ELM).
- **Estilizado:** [Lipgloss](https://github.com/charmbracelet/lipgloss) (Layouts y colores).
- **Storage:** SQLite (v√≠a `mattn/go-sqlite3` o `modernc.org/sqlite` para pure Go) para guardar historial, estad√≠sticas y pesos de SRS.

### Componentes Clave

1.  **The Engine (`pkg/engine`):**
    - Controla el estado del input, el buffer de texto y la comparaci√≥n (Diffing) entre lo esperado y lo escrito.
    - Calcula WPM y Precisi√≥n en tiempo real.
2.  **The Lesson Generator (`pkg/generator`):**
    - Genera contenido basado en el perfil del usuario (teclas d√©biles).
    - Soporta carga de archivos locales (`kata run main.go`).
3.  **The Analyst (`pkg/stats`):**
    - Almacena cada keystroke con timestamp.
    - Genera mapas de calor (Heatmaps) de errores.

### UX Features

- **Smart Backspace:** `Ctrl+Backspace` borra palabras completas.
- **Themes:** Soporte para esquemas de color (Catppuccin, Rose Pine, etc.).

---

## 5. Roadmap de Implementaci√≥n

### Fase 1: El Prototipo (MVP)

- [ ] Inicializar proyecto Go (`go mod init kata`).
- [ ] Configurar modelo b√°sico de Bubble Tea.
- [ ] Implementar input de texto simple y renderizado de caracteres (Correcto=Verde, Error=Rojo).
- [ ] C√°lculo b√°sico de WPM al finalizar.

### Fase 2: El Entrenador

- [ ] Implementar generador de lecciones basado en diccionarios.
- [ ] A√±adir soporte para cargar archivos de texto/c√≥digo.
- [ ] Crear base de datos SQLite para persistencia.

### Fase 3: La Inteligencia

- [ ] Implementar sistema SRS (rastreo de errores por tecla).
- [ ] Generaci√≥n de lecciones "de reparaci√≥n" (enfocadas en debilidades).
- [ ] Gr√°ficas de progreso con `charmbracelet/lipgloss` o caracteres ASCII.

### Fase 4: Polish & Flow

- [ ] Men√∫s de configuraci√≥n robustos.
- [ ] Modo "Zen" (sin UI, solo texto).

